# LƯU Ý: File này KHÔNG được sử dụng để chạy Java service
# Java service phải chạy trực tiếp bằng Maven: .\mvnw.cmd spring-boot:run
# Chỉ database và infrastructure (Kafka, Zookeeper) chạy bằng Docker
# Sử dụng docker-compose.yml ở root để khởi động databases và Kafka

version: '3.8'

services:
  # Database và Kafka đã được di chuyển vào docker-compose.yml ở root
  # Không cần chạy file này - sử dụng docker-compose.yml ở root thay thế
  # postgres-transaction:
  #   ...
  # zookeeper-transaction:
  #   ...
  # kafka-transaction:
  #   ...

# LƯU Ý: File này KHÔNG được sử dụng để chạy Java service
# Java service phải chạy trực tiếp bằng Maven: .\mvnw.cmd spring-boot:run
# Chỉ database và infrastructure (Kafka, Zookeeper) chạy bằng Docker
# Sử dụng docker-compose.yml ở root để khởi động databases và Kafka

  # Java service đã được comment - KHÔNG chạy bằng Docker
  # transaction-service:
  #   build:
  #     context: .
  #     dockerfile: Dockerfile
  #   container_name: transaction-service
  #   depends_on:
  #     postgres-transaction:
  #       condition: service_healthy
  #     kafka-transaction:
  #       condition: service_healthy
  #   environment:
  #     SPRING_DATASOURCE_URL: jdbc:postgresql://postgres-transaction:5432/transaction_db
  #     SPRING_DATASOURCE_USERNAME: transaction_user
  #     SPRING_DATASOURCE_PASSWORD: transaction_password
  #     SPRING_KAFKA_BOOTSTRAP_SERVERS: kafka-transaction:29094
  #     SPRING_PROFILES_ACTIVE: docker
  #     SERVICES_ACCOUNT-SERVICE_URL: http://account-service:8082
  #     SERVICES_INTERNAL-SECRET: internal-secret
  #   ports:
  #     - "8083:8083"
  #   networks:
  #     - banking-network
  #   restart: unless-stopped

volumes:
  postgres_transaction_data:

networks:
  banking-network:
    driver: bridge


